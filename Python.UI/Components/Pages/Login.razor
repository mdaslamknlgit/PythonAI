@page "/login"
@rendermode InteractiveServer
@inject HttpClient Http
@inject NavigationManager Nav

<h3>Login</h3>

<input @bind="username" placeholder="Username" />
<input @bind="password" type="password" />
<button @onclick="DoLogin">Login</button>

@code {
    string username = "admin";
    string password = "admin";

    private async Task DoLogin()
    {
        var content = new FormUrlEncodedContent(
            new Dictionary<string, string>
            {
                ["username"] = username,
                ["password"] = password
            });

        var response = await Http.PostAsync("/auth/login", content);

        if (response.IsSuccessStatusCode)
        {
            // 🔑 THIS IS THE FIX
            Nav.NavigateTo("/", forceLoad: true);
        }
    }
}
